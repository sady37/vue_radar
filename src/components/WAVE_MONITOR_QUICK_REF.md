# WaveMonitor 快速参考

## 📸 新界面布局

```
┌─────────────────────────────────────────────────────────────┐
│ WaveMonitor                                                  │
├─────────────────────────────────────────────────────────────┤
│ Track 工具栏                                                 │
│                                                              │
│ Device: [RADAR_001 ▼]  Time: [20251031 23:27:28]           │
│                                                              │
│ ⦿ EventTime (前60秒, 后120秒)  ○ StartTime [2] min         │
│                                Speed: [1x ▼]                 │
│                                                              │
│ [FromFile] [PlayBack] [Demo]    Progress: 50/100           │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│              波形显示区域（待实现）                           │
│                                                              │
└─────────────────────────────────────────────────────────────┘
      620px × 650px
```

---

## ⚡ 快速使用

### 方式 1：演示模式（最快）

```
1. 点击 [Demo] 按钮
2. 点击 [PlayBack] 按钮
✅ 完成！
```

### 方式 2：EventTime 模式

```
1. Device: 选择 "RADAR_001"
2. Time: 输入 "20251031 23:30:00"
3. 选择 ⦿ EventTime（自动：前60秒，后120秒）
4. Speed: 选择 1x, 1.5x 或 2x
5. 点击 [PlayBack]

结果：
回放从 23:29:00 ~ 23:32:00 (3分钟)
  - 23:29:00 ~ 23:30:00 (前60秒)
  - 23:30:00 (事件时刻) ⚡
  - 23:30:00 ~ 23:32:00 (后120秒)
```

### 方式 3：StartTime 模式

```
1. Device: 选择 "RADAR_001"
2. Time: 输入 "20251031 23:00:00"
3. 选择 ⦿ StartTime，输入 5 (分钟)
4. Speed: 选择 1x, 1.5x 或 2x
5. 点击 [PlayBack]

结果：
回放从 23:00:00 ~ 23:05:00 (5分钟)
```

### 方式 4：从文件加载

```
1. 点击 [FromFile]
2. 选择 sample.txt
3. Device 和 Time 自动填充
4. 调整模式和速度
5. 点击 [PlayBack]
```

---

## 🎯 参数说明

### 基本参数

| 参数 | 类型 | 范围/格式 | 默认值 | 说明 |
|------|------|----------|--------|------|
| **Device** | 下拉 | Canvas中的雷达 | - | 必填 |
| **Time** | 文本 | `YYYYMMDD HH:MM:SS` | - | 时间输入（统一） |

### 时间模式（单选）

| 模式 | 时长 | 说明 |
|------|------|------|
| **EventTime** | 固定 3 分钟 | 前60秒 + 后120秒 |
| **StartTime** | 可调 1-30 分钟 | 从指定时间开始 |

### 播放速度

| 速度 | 说明 |
|------|------|
| **1x** | 正常速度（实时） |
| **1.5x** | 1.5倍速 |
| **2x** | 2倍速（快速） |

---

## 🎬 EventTime vs StartTime

### EventTime 模式

```
用途：查看特定事件前后的情况（如跌倒、离床）

时间分配：
  ├─ 前60秒 ─┤─ 事件 ─├─ 后120秒 ─┤
  23:29:00   23:30:00   23:32:00
     ↓          ↓          ↓
   准备阶段   事件发生   后续情况
   
总时长：3 分钟（固定）

优势：
  ✅ 快速定位事件
  ✅ 查看事件前后完整过程
  ✅ 符合 HIPAA 要求
```

### StartTime 模式

```
用途：查看一段时间内的连续数据

时间分配：
  ├────────── 用户指定时长 ──────────┤
  23:00:00                    23:05:00
     ↓                           ↓
   开始时间                   结束时间
   
时长：1-30 分钟（可调）

优势：
  ✅ 灵活调整时长
  ✅ 适合长时间观察
  ✅ 可查看多个事件
```

---

## 🔒 HIPAA 隐私保护

### StartTime 模式限制

```
TimeLong: {
  最小值: 1 分钟
  默认值: 2 分钟
  最大值: 30 分钟  ← HIPAA 限制
}
```

### EventTime 模式限制

```
固定时长: 3 分钟
  - 前60秒（观察事件准备阶段）
  - 后120秒（观察事件后续影响）
```

**原因：** 防止长时间观看历史数据导致隐私泄漏

---

## 🎮 播放速度详解

### 速度选项

| 速度 | 实际效果 | 适用场景 |
|------|---------|---------|
| **1x** | 1秒数据 = 1秒播放 | 详细观察，精确分析 |
| **1.5x** | 1秒数据 = 0.67秒播放 | 稍快浏览，节省时间 |
| **2x** | 1秒数据 = 0.5秒播放 | 快速浏览，找重点 |

### 实际播放时长

**EventTime 模式（3分钟数据）：**
- 1x：播放 3 分钟
- 1.5x：播放 2 分钟
- 2x：播放 1.5 分钟

**StartTime 模式（5分钟数据）：**
- 1x：播放 5 分钟
- 1.5x：播放 3.3 分钟
- 2x：播放 2.5 分钟

---

## ⏱️ 时间格式

### 输入格式（统一）

**标准格式：** `YYYYMMDD HH:MM:SS`

**示例：**
```
20251031 23:27:28  ✅ 推荐（有空格）
2025103123:27:28   ✅ 也支持（无空格）
```

**错误格式：**
```
2025-10-31 23:27:28  ❌ (有横杠)
10/31/2025 11:27 PM  ❌ (美式格式)
20251031_23:27:28    ❌ (下划线)
```

---

## 📊 界面优势

### 新设计优势

```
旧设计：
  ❌ 两个时间输入框（StartTime + EventTime）
  ❌ 复选框切换，容易混淆
  ❌ 时长和事件时间混在一起

新设计：
  ✅ 一个时间输入框（Time）
  ✅ 单选框清晰分离两种模式
  ✅ 每种模式的时长自动调整
  ✅ 播放速度独立显示
```

### 交互流程简化

```
旧流程（5步）：
1. 输入 StartTime
2. 输入 TimeLong
3. 勾选 EventTime（可选）
4. 输入 EventTime（如果勾选）
5. 点击 PlayBack

新流程（3步）：
1. 输入 Time（统一）
2. 选择模式（EventTime 或 StartTime）
3. 点击 PlayBack
```

---

## 🎯 使用场景

### 场景 1：查看跌倒事件

```
目标：分析老人在 23:30:00 的跌倒事件

操作：
1. Device: "RADAR_001"
2. Time: "20251031 23:30:00"
3. ⦿ EventTime
4. Speed: 1x（详细观察）
5. PlayBack

结果：
23:29:00 ~ 23:32:00
  - 23:29:00~23:30:00: 跌倒前的活动
  - 23:30:00: 跌倒瞬间 ⚡
  - 23:30:00~23:32:00: 跌倒后的状态
```

### 场景 2：查看夜间活动

```
目标：查看老人夜间1点到1点10分的活动

操作：
1. Device: "RADAR_001"
2. Time: "20251101 01:00:00"
3. ⦿ StartTime: 10 min
4. Speed: 1.5x（稍快浏览）
5. PlayBack

结果：
01:00:00 ~ 01:10:00（10分钟）
实际播放时长：6.7 分钟（1.5倍速）
```

### 场景 3：快速浏览异常时段

```
目标：快速查看凌晨3点到3点半的数据

操作：
1. Device: "RADAR_001"
2. Time: "20251101 03:00:00"
3. ⦿ StartTime: 30 min（最大时长）
4. Speed: 2x（快速浏览）
5. PlayBack

结果：
03:00:00 ~ 03:30:00（30分钟）
实际播放时长：15 分钟（2倍速）
```

---

## 🎮 按钮功能

| 按钮 | 功能 | 状态 |
|------|------|------|
| **FromFile** | 从本地文件加载数据 | 播放时禁用 |
| **PlayBack** | 开始播放（变为 Stop） | 切换状态 |
| **Demo** | 加载演示数据 | 播放时禁用 |

---

## 🔄 工作流程

```
1. 选择设备（Device）
   ↓
2. 输入时间（Time）
   ↓
3. 选择模式
   ├─ EventTime：自动3分钟（前60秒+后120秒）
   └─ StartTime：手动输入时长（1-30分钟）
   ↓
4. 选择播放速度（1x / 1.5x / 2x）
   ↓
5. 点击 PlayBack
   ↓
6. 数据加载并开始回放
   ↓
7. 显示播放进度
   ↓
8. 点击 Stop（可选）
```

---

## 🛠️ 开发状态

### ✅ 已完成（新版）
- 统一的时间输入框
- 单选框模式切换（EventTime / StartTime）
- EventTime 自动时长（前60秒+后120秒=3分钟）
- StartTime 可调时长（1-30分钟）
- 播放速度选择（1x, 1.5x, 2x）
- UI 布局和样式优化
- 时间格式解析
- HIPAA 限制验证

### 🚧 待实现
- 实际数据解析
- 回放定时器（根据 playbackSpeed 调整）
- 进度条显示
- 波形绘制
- 与 Canvas 联动

---

## 💡 设计亮点

### 1. 统一时间输入
```
只需输入一次时间，模式自动决定如何使用：
  - EventTime：作为事件中心点
  - StartTime：作为起始点
```

### 2. 自动时长管理
```
EventTime：自动固定3分钟（无需输入）
StartTime：手动输入1-30分钟
```

### 3. 清晰的模式区分
```
单选框比复选框更清晰：
  ⦿ EventTime (前60秒, 后120秒)
  ○ StartTime [__] min
```

### 4. 独立的播放速度控制
```
Speed: [1x ▼]
  - 不与时间模式混淆
  - 可随时调整
  - 清晰显示当前速度
```

---

## 📁 相关文件

```
src/
├── components/
│   ├── WaveMonitor.vue           ← 主组件（已更新）
│   ├── WAVE_MONITOR_GUIDE.md     ← 详细指南
│   └── WAVE_MONITOR_QUICK_REF.md ← 本文档（已更新）
│
├── assets/Data/
│   └── sample.txt                ← 演示数据
│
└── utils/
    └── mockRadarData.ts          ← 数据回放服务
```

---

## 🎯 常见问题

### Q: EventTime 为什么是前60秒后120秒，而不是前后各60秒？
**A:** 因为事件发生后的情况（后续影响）通常比事件发生前更重要，需要更长时间观察恢复情况。

### Q: 为什么 StartTime 最大只有 30 分钟？
**A:** HIPAA 隐私保护要求，防止长时间观看历史数据导致隐私泄漏。

### Q: 播放速度可以超过 2x 吗？
**A:** 目前限制为 2x，因为更快的速度可能导致漏掉重要细节。如需快速定位，建议使用 EventTime 模式。

### Q: Time 输入框在两种模式下有什么区别？
**A:** 输入值相同，但含义不同：
- EventTime：Time 是事件中心点
- StartTime：Time 是起始时间点

---

**全新设计，更简洁、更高效！** 🚀
