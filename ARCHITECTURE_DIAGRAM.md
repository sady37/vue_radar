# Vue Radar ç³»ç»Ÿæ¶æ„å›¾

**ç‰ˆæœ¬ï¼š** v0.5-2025011050155  
**åˆ›å»ºæ—¥æœŸï¼š** 2025-01-10

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ç”¨æˆ·ç•Œé¢å±‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ RadarCanvas  â”‚  â”‚ WaveMonitor  â”‚  â”‚   Toolbar    â”‚          â”‚
â”‚  â”‚   2647è¡Œ     â”‚  â”‚   1400+è¡Œ    â”‚  â”‚   3132è¡Œ     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         â”‚      æ•°æ®ç®¡ç†å±‚ï¼ˆPinia Storesï¼‰      â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ objects.ts  â”‚  â”‚radarData.ts  â”‚  â”‚  canvas.ts    â”‚          â”‚
â”‚  â”‚   481è¡Œ     â”‚  â”‚   441è¡Œ      â”‚  â”‚   162è¡Œ       â”‚          â”‚
â”‚  â”‚  åœºæ™¯å¯¹è±¡   â”‚  â”‚  é›·è¾¾æ•°æ®    â”‚  â”‚  ç”»å¸ƒçŠ¶æ€     â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚         â”‚                 â”‚                   â”‚                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚            waveform.ts (294è¡Œ)                    â”‚          â”‚
â”‚  â”‚              æ³¢å½¢æ•°æ®ç®¡ç†                          â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                å·¥å…·æ”¯æŒå±‚ï¼ˆUtilsï¼‰                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ç»˜å›¾å·¥å…·  â”‚    æ•°æ®å·¥å…·        â”‚  é…ç½®å·¥å…·  â”‚  å¯¹è±¡å·¥å…·  â”‚    â”‚
â”‚  â”‚            â”‚                   â”‚           â”‚           â”‚    â”‚
â”‚  â”‚ drawDevicesâ”‚  mockRadarData    â”‚postureIconsâ”‚objectHelpersâ”‚   â”‚
â”‚  â”‚ drawObjectsâ”‚  radarUtils       â”‚alarmSound â”‚           â”‚    â”‚
â”‚  â”‚ drawShapes â”‚  autoQuery        â”‚types      â”‚           â”‚    â”‚
â”‚  â”‚ drawingToolâ”‚  urlParams        â”‚           â”‚           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ æ•°æ®æµå‘å›¾

### 1. å®æ—¶é›·è¾¾æ•°æ®æµ

```
MQTT/WebSocket
      â†“
[Mock/Real Data]
      â†“
radarDataStore.updatePersons()
      â†“
â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
â”‚ persons[] â”‚ â† å½“å‰äººå‘˜çŠ¶æ€
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â†“
RadarCanvas.drawPersons()
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Canvas 2D Context   â”‚
â”‚ - å§¿æ€å›¾æ ‡          â”‚
â”‚ - è½¨è¿¹çº¿            â”‚
â”‚ - ç”Ÿç†æŒ‡æ ‡é¢æ¿      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2. å†å²æ•°æ®å›æ”¾æµ

```
QueryPanel
   â†“
[Manual Import / Auto Query]
   â†“
API: /api/radar/playback
   â†“
radarDataStore.loadHistoricalData()
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚historicalData[] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
WaveMonitor.startPlayback()
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®šæ—¶å™¨æ’­æ”¾æœºåˆ¶   â”‚
â”‚ setInterval()   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
radarDataStore.updatePersons()
         â†“
RadarCanvas æ¸²æŸ“
```

---

### 3. å¯¹è±¡ç¼–è¾‘æµ

```
Toolbar ç”¨æˆ·æ“ä½œ
      â†“
objectsStore.addObject()
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ objects[]    â”‚ â† åœºæ™¯å¯¹è±¡æ•°ç»„
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
RadarCanvas.drawObjects()
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Canvas æ¸²æŸ“          â”‚
â”‚ - å‡ ä½•å›¾å½¢           â”‚
â”‚ - IoTè®¾å¤‡           â”‚
â”‚ - å®¶å…·/å¢™ä½“/çª—å¸˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ ç»„ä»¶å…³ç³»å›¾

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ App.vue â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚                â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚Radar   â”‚      â”‚Wave     â”‚     â”‚Toolbar  â”‚
    â”‚Canvas  â”‚      â”‚Monitor  â”‚     â”‚         â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚                â”‚                â”‚
        â”‚           â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”           â”‚
        â”‚           â”‚Query    â”‚           â”‚
        â”‚           â”‚Panel    â”‚           â”‚
        â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
        â”‚                                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                           â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
    â”‚ Stores  â”‚              â”‚   Utils    â”‚
    â”‚         â”‚              â”‚            â”‚
    â”‚ canvas  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ drawDevicesâ”‚
    â”‚ objects â”‚              â”‚ radarUtils â”‚
    â”‚radarDataâ”‚              â”‚postureIconsâ”‚
    â”‚waveform â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—‚ï¸ æ¨¡å—åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 1: ç”¨æˆ·äº¤äº’å±‚ (UI Components)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ RadarCanvas  â”‚ â”‚ WaveMonitor  â”‚ â”‚   Toolbar    â”‚     â”‚
â”‚ â”‚              â”‚ â”‚              â”‚ â”‚              â”‚     â”‚
â”‚ â”‚ â€¢ é›·è¾¾æ˜¾ç¤º   â”‚ â”‚ â€¢ è½¨è¿¹æ’­æ”¾   â”‚ â”‚ â€¢ å¯¹è±¡ç¼–è¾‘   â”‚     â”‚
â”‚ â”‚ â€¢ åæ ‡äº¤äº’   â”‚ â”‚ â€¢ æ³¢å½¢æ˜¾ç¤º   â”‚ â”‚ â€¢ è®¾å¤‡é…ç½®   â”‚     â”‚
â”‚ â”‚ â€¢ ç¼©æ”¾å¹³ç§»   â”‚ â”‚ â€¢ æ•°æ®æŸ¥è¯¢   â”‚ â”‚ â€¢ ç»˜å›¾å·¥å…·   â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 2: çŠ¶æ€ç®¡ç†å±‚ (Pinia Stores)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ canvas   â”‚ â”‚ objects   â”‚ â”‚radarDataâ”‚ â”‚waveform  â”‚    â”‚
â”‚ â”‚          â”‚ â”‚           â”‚ â”‚         â”‚ â”‚          â”‚    â”‚
â”‚ â”‚ â€¢ ç”»å¸ƒ   â”‚ â”‚ â€¢ åœºæ™¯    â”‚ â”‚ â€¢ äººå‘˜  â”‚ â”‚ â€¢ HR/RR  â”‚    â”‚
â”‚ â”‚ â€¢ å¸ƒå±€   â”‚ â”‚ â€¢ è®¾å¤‡    â”‚ â”‚ â€¢ è½¨è¿¹  â”‚ â”‚ â€¢ æ—¶åº   â”‚    â”‚
â”‚ â”‚ â€¢ ç½‘æ ¼   â”‚ â”‚ â€¢ å®¶å…·    â”‚ â”‚ â€¢ ç”Ÿç†  â”‚ â”‚ â€¢ ç¼“å­˜   â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 3: ä¸šåŠ¡é€»è¾‘å±‚ (Utils)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ ç»˜å›¾å·¥å…·      â”‚ â”‚ æ•°æ®å·¥å…·      â”‚ â”‚ é…ç½®å·¥å…·      â”‚     â”‚
â”‚ â”‚              â”‚ â”‚              â”‚ â”‚              â”‚     â”‚
â”‚ â”‚ â€¢ drawDevicesâ”‚ â”‚ â€¢ mockData   â”‚ â”‚ â€¢ presets    â”‚     â”‚
â”‚ â”‚ â€¢ drawObjectsâ”‚ â”‚ â€¢ radarUtils â”‚ â”‚ â€¢ posture    â”‚     â”‚
â”‚ â”‚ â€¢ drawShapes â”‚ â”‚ â€¢ autoQuery  â”‚ â”‚ â€¢ alarmSound â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 4: æ•°æ®æ¥å£å±‚ (API)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ layoutApi    â”‚ â”‚ MQTT Client  â”‚ â”‚ WebSocket    â”‚     â”‚
â”‚ â”‚              â”‚ â”‚              â”‚ â”‚              â”‚     â”‚
â”‚ â”‚ â€¢ save       â”‚ â”‚ â€¢ subscribe  â”‚ â”‚ â€¢ connect    â”‚     â”‚
â”‚ â”‚ â€¢ load       â”‚ â”‚ â€¢ publish    â”‚ â”‚ â€¢ receive    â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Layer 5: åç«¯æœåŠ¡å±‚ (Backend)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚ â”‚ REST API     â”‚ â”‚ Database     â”‚ â”‚ MQTT Broker  â”‚     â”‚
â”‚ â”‚              â”‚ â”‚              â”‚ â”‚              â”‚     â”‚
â”‚ â”‚ â€¢ playback   â”‚ â”‚ â€¢ layouts    â”‚ â”‚ â€¢ radar      â”‚     â”‚
â”‚ â”‚ â€¢ layout     â”‚ â”‚ â€¢ radar_data â”‚ â”‚ â€¢ vital      â”‚     â”‚
â”‚ â”‚ â€¢ device     â”‚ â”‚ â€¢ vital_data â”‚ â”‚ â€¢ control    â”‚     â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š æ ¸å¿ƒæ¨¡å—è¯¦ç»†æ¶æ„

### RadarCanvas å†…éƒ¨ç»“æ„

```
RadarCanvas.vue
â”‚
â”œâ”€â”€ ã€æ¸²æŸ“å±‚ã€‘
â”‚   â”œâ”€â”€ drawBackground()      - èƒŒæ™¯/ç½‘æ ¼
â”‚   â”œâ”€â”€ drawObjects()         - åœºæ™¯å¯¹è±¡
â”‚   â”œâ”€â”€ drawDevices()         - IoTè®¾å¤‡
â”‚   â”œâ”€â”€ drawRadarSignalArea() - é›·è¾¾ä¿¡å·åŒº
â”‚   â”œâ”€â”€ drawRadarCoordSys()   - é›·è¾¾åæ ‡ç³»
â”‚   â”œâ”€â”€ drawPersons()         - äººå‘˜æ˜¾ç¤º
â”‚   â”‚   â”œâ”€â”€ drawTrajectory()  - è½¨è¿¹çº¿
â”‚   â”‚   â”œâ”€â”€ drawIconAndText() - å§¿æ€å›¾æ ‡
â”‚   â”‚   â””â”€â”€ drawVitalPanel()  - ç”Ÿç†é¢æ¿ (å·²ç§»é™¤)
â”‚   â””â”€â”€ drawAlarmOverlay()    - å‘Šè­¦é®ç½©
â”‚
â”œâ”€â”€ ã€äº¤äº’å±‚ã€‘
â”‚   â”œâ”€â”€ handleMouseMove()     - é¼ æ ‡ç§»åŠ¨
â”‚   â”œâ”€â”€ handleMouseDown()     - é¼ æ ‡æŒ‰ä¸‹
â”‚   â”œâ”€â”€ handleMouseUp()       - é¼ æ ‡æŠ¬èµ·
â”‚   â”œâ”€â”€ handleWheel()         - æ»šè½®ç¼©æ”¾
â”‚   â”œâ”€â”€ handleCanvasClick()   - å•å‡»
â”‚   â””â”€â”€ handleCanvasDblClick()- åŒå‡»
â”‚
â”œâ”€â”€ ã€çŠ¶æ€å±‚ã€‘
â”‚   â”œâ”€â”€ scale                 - ç¼©æ”¾æ¯”ä¾‹
â”‚   â”œâ”€â”€ mouseX/mouseY         - é¼ æ ‡åæ ‡ (å›ºå®šå®½åº¦æ˜¾ç¤º)
â”‚   â”œâ”€â”€ showVital             - æ˜¾ç¤ºç”Ÿç†æŒ‡æ ‡å¼€å…³
â”‚   â””â”€â”€ panelControls         - é¢æ¿æ§åˆ¶ (inject)
â”‚
â””â”€â”€ ã€å·¥å…·å±‚ã€‘
    â”œâ”€â”€ formatCoord()         - åæ ‡æ ¼å¼åŒ–
    â”œâ”€â”€ adjustZoom()          - ç¼©æ”¾è°ƒæ•´
    â””â”€â”€ getHeartRateStatus()  - ç”Ÿç†æŒ‡æ ‡åˆ†çº§
```

---

### WaveMonitor å†…éƒ¨ç»“æ„

```
WaveMonitor.vue
â”‚
â”œâ”€â”€ ã€æ§åˆ¶å±‚ã€‘
â”‚   â”œâ”€â”€ Trackæ’­æ”¾æ§åˆ¶
â”‚   â”‚   â”œâ”€â”€ fromServer    - æœåŠ¡å™¨æŸ¥è¯¢
â”‚   â”‚   â”œâ”€â”€ fromFile      - æ–‡ä»¶å¯¼å…¥
â”‚   â”‚   â””â”€â”€ Demo          - æ¼”ç¤ºæ•°æ®
â”‚   â”‚
â”‚   â”œâ”€â”€ Vitalæ’­æ”¾æ§åˆ¶
â”‚   â”‚   â”œâ”€â”€ fromServer    - æœåŠ¡å™¨æŸ¥è¯¢
â”‚   â”‚   â”œâ”€â”€ fromFile      - æ–‡ä»¶å¯¼å…¥
â”‚   â”‚   â””â”€â”€ RealTime      - å®æ—¶æ•°æ®
â”‚   â”‚
â”‚   â””â”€â”€ æ’­æ”¾æ§åˆ¶
â”‚       â”œâ”€â”€ Play/Pause    - æ’­æ”¾/æš‚åœ
â”‚       â”œâ”€â”€ Stop          - åœæ­¢
â”‚       â””â”€â”€ Speed (1x/1.5x/2x)
â”‚
â”œâ”€â”€ ã€æ˜¾ç¤ºå±‚ã€‘
â”‚   â”œâ”€â”€ Track-Playback    - è½¨è¿¹æ’­æ”¾çŠ¶æ€
â”‚   â”œâ”€â”€ Vital Play        - ç”Ÿç†æ•°æ®çŠ¶æ€
â”‚   â”œâ”€â”€ æ³¢å½¢æ˜¾ç¤ºåŒº        - HR/RRå›¾è¡¨ (å¾…å®ç°)
â”‚   â””â”€â”€ çŠ¶æ€æ˜¾ç¤ºåŒº (2è¡Œ)  - æ’­æ”¾ä¿¡æ¯
â”‚
â”œâ”€â”€ ã€æŸ¥è¯¢å±‚ã€‘
â”‚   â””â”€â”€ QueryPanel (ğŸ”)   - å†å²æ•°æ®æŸ¥è¯¢
â”‚       â”œâ”€â”€ Manual Import - æ‰‹åŠ¨å¯¼å…¥
â”‚       â”œâ”€â”€ Auto Query    - è‡ªåŠ¨æŸ¥è¯¢
â”‚       â””â”€â”€ Track/Vital   - ç±»å‹é€‰æ‹©
â”‚
â””â”€â”€ ã€æ•°æ®å±‚ã€‘
    â”œâ”€â”€ timeInput         - æ—¶é—´è¾“å…¥
    â”œâ”€â”€ timeLong          - æ—¶é•¿ (2-30min)
    â”œâ”€â”€ vitalTimeLong     - Vitalæ—¶é•¿ (5-30min)
    â””â”€â”€ darkBackground    - æ³¢å½¢èƒŒæ™¯è‰²
```

---

### Toolbar å†…éƒ¨ç»“æ„

```
Toolbar.vue
â”‚
â”œâ”€â”€ ã€ç»˜å›¾å·¥å…·ã€‘
â”‚   â”œâ”€â”€ Wall              - å¢™ä½“ç»˜åˆ¶
â”‚   â”œâ”€â”€ Furniture         - å®¶å…·ç»˜åˆ¶
â”‚   â”œâ”€â”€ Curtain           - çª—å¸˜ç»˜åˆ¶
â”‚   â””â”€â”€ IoT Devices       - è®¾å¤‡æ”¾ç½®
â”‚
â”œâ”€â”€ ã€å¯¹è±¡ç¼–è¾‘ã€‘
â”‚   â”œâ”€â”€ å‡ ä½•å±æ€§
â”‚   â”‚   â”œâ”€â”€ Name          - å¯¹è±¡åç§°
â”‚   â”‚   â”œâ”€â”€ Rotation      - æ—‹è½¬è§’åº¦ (ä¸Heightå³å¯¹é½)
â”‚   â”‚   â”œâ”€â”€ Width/Depth   - å®½åº¦/æ·±åº¦
â”‚   â”‚   â””â”€â”€ Height        - é«˜åº¦
â”‚   â”‚
â”‚   â”œâ”€â”€ åæ ‡æ˜¾ç¤º (X:/Y:)  - å›ºå®š48pxå®½åº¦
â”‚   â”‚
â”‚   â””â”€â”€ æ–¹å‘æ§åˆ¶é”®
â”‚       â”œâ”€â”€ å·¦è¾¹è· +10px
â”‚       â”œâ”€â”€ ä¸­é—´gap -10px (30px)
â”‚       â””â”€â”€ æ•´ä½“å³ç§» +6px
â”‚
â”œâ”€â”€ ã€è®¾å¤‡é…ç½®ã€‘
â”‚   â”œâ”€â”€ Radaré…ç½®
â”‚   â”‚   â”œâ”€â”€ InstallMod    - Ceiling/Wall/Corn (å­—ä½“11px)
â”‚   â”‚   â”œâ”€â”€ WorkMode      - MoveDetect/LBS/Vital
â”‚   â”‚   â”œâ”€â”€ Boundary      - Bound (å­—ä½“13px)
â”‚   â”‚   â”œâ”€â”€ Signal        - ä¿¡å·æ˜¾ç¤º (å­—ä½“13px)
â”‚   â”‚   â””â”€â”€ Height        - å®‰è£…é«˜åº¦
â”‚   â”‚
â”‚   â””â”€â”€ Sleeppadé…ç½®
â”‚       â”œâ”€â”€ è®¾å¤‡å‚æ•°
â”‚       â””â”€â”€ çŠ¶æ€æ˜¾ç¤º
â”‚
â””â”€â”€ ã€å¸ƒå±€ç®¡ç†ã€‘
    â”œâ”€â”€ Save Layout       - ä¿å­˜å¸ƒå±€
    â”œâ”€â”€ Load Layout       - åŠ è½½å¸ƒå±€
    â””â”€â”€ Clear All         - æ¸…ç©ºåœºæ™¯
```

---

## ğŸ”— è·¨æ¨¡å—é€šä¿¡æœºåˆ¶

### 1. Provide/Inject (é¢æ¿æ§åˆ¶)

```
App.vue
  â†“ provide('panelControls')
  â”‚
  â”œâ”€â†’ RadarCanvas
  â”‚    â””â”€â”€ Wave/ToolbaræŒ‰é’® â†’ toggleWaveform/toggleToolbar
  â”‚
  â”œâ”€â†’ WaveMonitor
  â”‚    â””â”€â”€ æ¥æ”¶å¼€å…³çŠ¶æ€
  â”‚
  â””â”€â†’ Toolbar
       â””â”€â”€ æ¥æ”¶å¼€å…³çŠ¶æ€
```

---

### 2. Pinia Store (çŠ¶æ€å…±äº«)

```
objectsStore
  â†‘ â†“
  â”‚ â””â”€â†’ Toolbar (ç¼–è¾‘)
  â”‚      â†“
  â””â”€â”€â”€â”€â”€RadarCanvas (æ˜¾ç¤º)

radarDataStore
  â†‘ â†“
  â”‚ â””â”€â†’ WaveMonitor (æ’­æ”¾)
  â”‚      â†“
  â””â”€â”€â”€â”€â”€RadarCanvas (æ¸²æŸ“)
```

---

### 3. Event Emitter (ç»„ä»¶é€šä¿¡)

```
QueryPanel
  â†“ @success
WaveMonitor
  â†“ åŠ è½½æ•°æ®
radarDataStore
  â†“ æ›´æ–°çŠ¶æ€
RadarCanvas
  â†“ é‡æ–°æ¸²æŸ“
```

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–æ¶æ„

### æ¸²æŸ“ä¼˜åŒ–

```
requestAnimationFrame
         â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚ è„æ£€æŸ¥   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚ æ‰¹é‡æ¸²æŸ“ â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â†“
  Canvas 2D Context
```

---

### æ•°æ®ç¼“å­˜

```
historicalData[]
      â†“
â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
â”‚ ç´¢å¼•å»ºç«‹   â”‚
â”‚ Map<æ—¶é—´æˆ³>â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â†“
  å¿«é€ŸæŸ¥æ‰¾
```

---

## ğŸ“ æ€»ç»“

### æ¶æ„ä¼˜åŠ¿
- âœ… åˆ†å±‚æ¸…æ™°ï¼ŒèŒè´£æ˜ç¡®
- âœ… ç»„ä»¶è§£è€¦ï¼Œæ˜“äºç»´æŠ¤
- âœ… Storeç»Ÿä¸€ç®¡ç†çŠ¶æ€
- âœ… Utilså¤ç”¨æ€§é«˜

### å¾…ä¼˜åŒ–ç‚¹
- ğŸš§ å¤§æ•°æ®é‡æ¸²æŸ“æ€§èƒ½
- ğŸš§ æ³¢å½¢å®æ—¶ç»˜åˆ¶
- ğŸš§ å†…å­˜ç®¡ç†ä¼˜åŒ–
- ğŸš§ é”™è¯¯è¾¹ç•Œå¤„ç†

---

**æ–‡æ¡£è¯´æ˜ï¼š** æœ¬æ–‡æ¡£å±•ç¤ºç³»ç»Ÿæ¶æ„çš„å¯è§†åŒ–å›¾ç¤ºï¼Œé…åˆ `PROJECT_MODULES.md` ä½¿ç”¨æ•ˆæœæ›´ä½³ã€‚

