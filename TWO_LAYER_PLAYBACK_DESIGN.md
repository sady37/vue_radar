# å†å²æ•°æ®å›æ”¾çš„åŒå±‚è®¾è®¡

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

å†å²æ•°æ®å›æ”¾éœ€è¦åŒºåˆ†ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„å±‚æ¬¡ï¼š

### ç¬¬1å±‚ï¼šæ•°æ®æŸ¥è¯¢ï¼ˆData Sourceï¼‰
**é—®é¢˜ï¼šä»å“ªä¸ªè®¾å¤‡è·å–æ•°æ®ï¼Ÿ**
- ä½¿ç”¨ **DeviceID (UUID v4)**
- å‘Šè¯‰åå°ä»å“ªä¸ªè®¾å¤‡çš„å“ªä¸ªæ—¶é—´æ®µå–æ•°æ®
- å¯ä»¥æ˜¯ä»»æ„è®¾å¤‡ï¼ˆæœ¬Canvasçš„ï¼Œæˆ–å…¶ä»–æˆ¿é—´/Canvasçš„ï¼‰

### ç¬¬2å±‚ï¼šæ•°æ®å±•ç¤ºï¼ˆDisplay Radarï¼‰
**é—®é¢˜ï¼šç”¨å“ªä¸ªé›·è¾¾çš„åæ ‡ç³»æ¥å±•ç¤ºï¼Ÿ**
- ä½¿ç”¨ **æœ¬Canvasä¸­çš„é›·è¾¾å¯¹è±¡**
- ç”¨äºåæ ‡è½¬æ¢ï¼ˆé›·è¾¾åæ ‡ç³» â†’ Canvasåæ ‡ç³»ï¼‰
- å¿…é¡»æ˜¯å½“å‰Canvasä¸­å­˜åœ¨çš„é›·è¾¾

---

## ğŸ“Š ä¸ºä»€ä¹ˆéœ€è¦ä¸¤å±‚ï¼Ÿ

### åœºæ™¯ç¤ºä¾‹

```
Room 101ï¼ˆå½“å‰Canvasï¼‰ï¼š
  - ç°åœ¨ä½¿ç”¨ Radar_Bï¼ˆUUID: "aaa-bbb-ccc"ï¼‰
  - ä½ç½®: (-80, 230)
  - è§’åº¦: 0Â°

å†å²æ•°æ®ï¼š
  - Day 1-9: ä½¿ç”¨ Radar_Aï¼ˆUUID: "111-222-333"ï¼‰â† å·²ç»æ¢æ‰äº†
  - æ•°æ®å­˜å‚¨çš„æ˜¯é›·è¾¾åæ ‡ç³» (h, v)
```

**æŸ¥è¯¢æ—¶ï¼š**
```
ç¬¬1å±‚ - æ•°æ®æŸ¥è¯¢ï¼š
  deviceId: "111-222-333"  â† Radar_A çš„ UUID
  â†’ åå°è¿”å› Radar_A çš„å†å²æ•°æ®
  â†’ æ•°æ®æ ¼å¼ï¼š{ h: 100, v: 50, posture: 1, ... }

ç¬¬2å±‚ - æ•°æ®å±•ç¤ºï¼š
  displayRadar: Radar_Bï¼ˆæœ¬Canvasä¸­çš„ï¼‰
  â†’ ä½¿ç”¨ Radar_B çš„ä½ç½®å’Œè§’åº¦è½¬æ¢åæ ‡
  â†’ toCanvasCoordinate(h: 100, v: 50, Radar_B)
  â†’ åœ¨ Canvas ä¸Šæ­£ç¡®æ˜¾ç¤ºäººå‘˜ä½ç½®
```

---

## ğŸ¯ HIPAA åˆè§„æ€§

### Vue å‰ç«¯ä½¿ç”¨ UUID

```
âœ… Vue å‰ç«¯ï¼š
  ç¬¬1å±‚ï¼šDeviceID (UUID v4)
    - "550e8400-e29b-41d4-a716-446655440000"
    - åŒ¿åæ ‡è¯†ç¬¦
    - ç¬¦åˆ HIPAA å»æ ‡è¯†åŒ–è¦æ±‚

âŒ Vue å‰ç«¯ä¸ä½¿ç”¨ï¼š
  DeviceCode (è®¾å¤‡ç¼–å·)
    - "9D8A326309E7"
    - å¯è¿½æº¯åˆ°ç‰©ç†è®¾å¤‡
    - å¯èƒ½å…³è”åˆ°æ‚£è€…
```

### åç«¯è´Ÿè´£æ˜ å°„

```
Vue å‰ç«¯                åç«¯ API               æ•°æ®åº“
   â†“                       â†“                     â†“
UUID                  UUID â†’ DeviceCode    device_code
"550e8400-..."       "550..." â†’ "9D8A..."  "9D8A326309E7"
   â†‘                       â†‘                     â†‘
ç¬¬1å±‚ï¼šæŸ¥è¯¢            å†…éƒ¨æ˜ å°„               ç‰©ç†å­˜å‚¨
```

---

## ğŸ® WaveMonitor ç•Œé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WaveMonitor                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [550e8400-...] StartTime: [2025103123:27:28] ~: [2] mins   â”‚
â”‚  â†‘ ç¬¬1å±‚ï¼šæ•°æ®æ¥æºï¼ˆUUIDï¼Œå¯ä»¥æ˜¯å…¶ä»–Canvasçš„ï¼‰               â”‚
â”‚                                                              â”‚
â”‚ [FromFile] [Play] [Demo]  Display: [Radar01â–¼]  Speed: 1x   â”‚
â”‚                            â†‘ ç¬¬2å±‚ï¼šå±•ç¤ºé›·è¾¾ï¼ˆæœ¬Canvasçš„ï¼‰    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ å®Œæ•´æµç¨‹

### 1. ç”¨æˆ·è¾“å…¥

```
ç¬¬1å±‚ï¼š
  DeviceID: "550e8400-e29b-41d4-a716-446655440000"  â† æ•°æ®æ¥æº
  StartTime: "2025103123:27:28"
  TimeLong: 2 mins

ç¬¬2å±‚ï¼š
  Display: Radar01  â† æœ¬Canvasçš„é›·è¾¾
```

### 2. æŸ¥è¯¢å†å²æ•°æ®

```typescript
// è°ƒç”¨åå° API
const queryParams = {
  deviceId: "550e8400-...",  // â† ç¬¬1å±‚ï¼šUUID
  startTime: 1730418448,
  endTime: 1730418568
};

const response = await queryHistoryData(queryParams);
// è¿”å›ï¼š
{
  data: [
    {
      id: 7372203,
      deviceCode: "9D8A326309E7",  // åå°è¿”å›ï¼ˆä½†Vueä¸ç”¨äºæŸ¥è¯¢ï¼‰
      position: { h: 100, v: 50 }, // é›·è¾¾åæ ‡ç³»
      posture: 4,
      timestamp: 1743269335
    },
    ...
  ]
}
```

### 3. è½¬æ¢åæ ‡å¹¶å±•ç¤º

```typescript
const displayRadar = canvasRadars.find(r => r.id === displayRadarId);

response.data.forEach(record => {
  // ä½¿ç”¨ç¬¬2å±‚çš„å±•ç¤ºé›·è¾¾è½¬æ¢åæ ‡
  const canvasPos = toCanvasCoordinate(
    record.position.h,    // æ¥è‡ªç¬¬1å±‚æ•°æ®
    record.position.v,    // æ¥è‡ªç¬¬1å±‚æ•°æ®
    displayRadar          // ç¬¬2å±‚ï¼šå±•ç¤ºé›·è¾¾
  );
  
  // æ›´æ–°åˆ° Canvas
  radarDataStore.updatePersons([{
    ...record,
    position: canvasPos  // è½¬æ¢åçš„ Canvas åæ ‡
  }]);
});
```

---

## ğŸ’¡ å…³é”®ç†è§£

### ç¬¬1å±‚ï¼šæ•°æ®æŸ¥è¯¢ï¼ˆWhereï¼‰

**å›ç­”ï¼šæ•°æ®ä»å“ªé‡Œæ¥ï¼Ÿ**
```
DeviceID (UUID) â†’ åå° API â†’ æ•°æ®åº“
  â†“
è¿”å›ç‰¹å®šè®¾å¤‡çš„å†å²æ•°æ®
  â†“
æ•°æ®æ ¼å¼ï¼šé›·è¾¾åæ ‡ç³» (h, v, z)
```

### ç¬¬2å±‚ï¼šæ•°æ®å±•ç¤ºï¼ˆHowï¼‰

**å›ç­”ï¼šæ•°æ®æ€ä¹ˆæ˜¾ç¤ºï¼Ÿ**
```
Display Radar â†’ Canvas åæ ‡ç³»
  â†“
ä½¿ç”¨å±•ç¤ºé›·è¾¾çš„ä½ç½®ã€è§’åº¦
  â†“
è½¬æ¢ï¼šé›·è¾¾åæ ‡ â†’ Canvas åæ ‡
  â†“
åœ¨ Canvas ä¸Šæ­£ç¡®ç»˜åˆ¶
```

---

## ğŸ¯ å®é™…åº”ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šæŸ¥çœ‹æœ¬è®¾å¤‡çš„å†å²æ•°æ®

```
å½“å‰ Canvas: Room 101, Radar_B
æŸ¥çœ‹: Radar_B æ˜¨å¤©çš„æ•°æ®

ç¬¬1å±‚ï¼šdeviceId = Radar_B çš„ UUID
ç¬¬2å±‚ï¼šdisplayRadar = Radar_Bï¼ˆæœ¬Canvasä¸­çš„ï¼‰

ç»“æœï¼š
  - æŸ¥è¯¢ Radar_B çš„æ•°æ® âœ…
  - ç”¨ Radar_B çš„åæ ‡ç³»å±•ç¤º âœ…
  - å®Œç¾åŒ¹é… âœ…
```

### åœºæ™¯ 2ï¼šæŸ¥çœ‹å·²æ›´æ¢è®¾å¤‡çš„å†å²æ•°æ®

```
å½“å‰ Canvas: Room 101, Radar_B
æŸ¥çœ‹: Radar_Aï¼ˆå·²æ›´æ¢ï¼‰ä¸Šå‘¨çš„æ•°æ®

ç¬¬1å±‚ï¼šdeviceId = Radar_A çš„ UUIDï¼ˆå·²ä¸åœ¨Canvasä¸­ï¼‰
ç¬¬2å±‚ï¼šdisplayRadar = Radar_Bï¼ˆæœ¬Canvasä¸­çš„ï¼‰

ç»“æœï¼š
  - æŸ¥è¯¢ Radar_A çš„å†å²æ•°æ® âœ…
  - ç”¨ Radar_B çš„åæ ‡ç³»å±•ç¤º âœ…
  - å¯èƒ½æœ‰åå·®ï¼ˆä¸¤ä¸ªé›·è¾¾ä½ç½®ä¸åŒï¼‰âš ï¸
```

### åœºæ™¯ 3ï¼šæŸ¥çœ‹å…¶ä»–æˆ¿é—´çš„å†å²æ•°æ®

```
å½“å‰ Canvas: Room 101, Radar_B
æŸ¥çœ‹: Room 102 çš„ Radar_C çš„æ•°æ®

ç¬¬1å±‚ï¼šdeviceId = Radar_C çš„ UUIDï¼ˆå…¶ä»–æˆ¿é—´ï¼‰
ç¬¬2å±‚ï¼šdisplayRadar = Radar_Bï¼ˆæœ¬Canvasä¸­çš„ï¼‰

ç»“æœï¼š
  - æŸ¥è¯¢ Radar_C çš„æ•°æ® âœ…
  - ç”¨ Radar_B çš„åæ ‡ç³»å±•ç¤º âœ…
  - æˆ¿é—´å¸ƒå±€å¯èƒ½å®Œå…¨ä¸åŒ âš ï¸
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### åæ ‡è½¬æ¢çš„å‡†ç¡®æ€§

```
æ•°æ®æ¥æºè®¾å¤‡ä½ç½® â‰  å±•ç¤ºé›·è¾¾ä½ç½®
  â†“
åæ ‡è½¬æ¢å¯èƒ½æœ‰åå·®
  â†“
å»ºè®®ï¼š
  - åŒä¸€æˆ¿é—´ï¼šåå·®è¾ƒå°
  - ä¸åŒæˆ¿é—´ï¼šä»…ä¾›å‚è€ƒ
```

### Display çš„"è‡ªåŠ¨"é€‰é¡¹

```
Display: [è‡ªåŠ¨]

é€»è¾‘ï¼š
  - å¦‚æœæ•°æ®æ¥æºçš„ DeviceID åœ¨æœ¬Canvasä¸­ â†’ è‡ªåŠ¨é€‰æ‹©è¯¥é›·è¾¾
  - å¦åˆ™ â†’ é€‰æ‹©ç¬¬ä¸€ä¸ªé›·è¾¾
```

---

## ğŸ“‹ æŸ¥è¯¢å‚æ•°ç»“æ„

```typescript
// ç¬¬1å±‚ï¼šå‘é€ç»™åå°çš„æŸ¥è¯¢å‚æ•°
interface QueryParams {
  deviceId: string;      // UUID v4ï¼ˆæ•°æ®æ¥æºï¼‰
  startTime: number;     // å¼€å§‹æ—¶é—´æˆ³ï¼ˆç§’ï¼‰
  endTime: number;       // ç»“æŸæ—¶é—´æˆ³ï¼ˆç§’ï¼‰
  duration: number;      // æ—¶é•¿ï¼ˆç§’ï¼‰
  mode: 'event' | 'start';
}

// ç¬¬2å±‚ï¼šå‰ç«¯ç”¨äºå±•ç¤ºçš„å‚æ•°
interface DisplayParams {
  displayRadarId: string;  // æœ¬Canvasä¸­çš„é›·è¾¾å¯¹è±¡ID
  playbackSpeed: number;   // æ’­æ”¾é€Ÿåº¦
}

// å®Œæ•´çš„å›æ”¾é…ç½®
interface PlaybackConfig {
  query: QueryParams;      // ç¬¬1å±‚
  display: DisplayParams;  // ç¬¬2å±‚
}
```

---

## âœ… è®¾è®¡ä¼˜åŠ¿

### 1. éšç§ä¿æŠ¤ï¼ˆHIPAAï¼‰
```
âœ… Vue å‰ç«¯åªä½¿ç”¨ UUID
âœ… DeviceCode ç”±åç«¯ç®¡ç†
âœ… å‰ç«¯ä¸æš´éœ²ç‰©ç†è®¾å¤‡ä¿¡æ¯
```

### 2. çµæ´»æ€§
```
âœ… å¯ä»¥æŸ¥çœ‹ä»»æ„è®¾å¤‡çš„æ•°æ®
âœ… å¯ä»¥åœ¨ä»»æ„Canvasä¸­å±•ç¤º
âœ… å¯ä»¥å¯¹æ¯”ä¸åŒè®¾å¤‡çš„æ•°æ®
```

### 3. èŒè´£åˆ†ç¦»
```
âœ… æ•°æ®æŸ¥è¯¢ï¼šåå°è´Ÿè´£
âœ… åæ ‡è½¬æ¢ï¼šå‰ç«¯è´Ÿè´£
âœ… æ¸…æ™°çš„è¾¹ç•Œ
```

---

**åŒå±‚è®¾è®¡ï¼šæ•°æ®æŸ¥è¯¢ + æ•°æ®å±•ç¤ºï¼Œå®Œç¾åˆ†ç¦»ï¼** ğŸ‰

